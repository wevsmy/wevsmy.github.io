---
title: MySQL ç»ƒä¹ 
date: 2018-02-27 07:35:00
categories:
- ç¬”è®°
- åšå®¢å›­
tags:
- åšå®¢å›­
- æ¬å®¶
- cnblogs
---
# [è¿™æ˜¯ğŸ‘‰MySQL ç»ƒä¹ ğŸ‘ˆçš„æ‘˜è¦](/2018/02/27/cnblog_8479171/)
<!--more-->
**1.åˆ›å»ºç•™è¨€æ•°æ®åº“: messagedb;**

    
    
    mysql> create database messagedb charset = utf8;

**2.åœ¨ **messagedb** æ•°æ®åº“ä¸­åˆ›å»ºç•™è¨€è¡¨messageï¼Œç»“æ„å¦‚ä¸‹:**

**è¡¨å**

|

**message**

|

**ç•™è¨€ä¿¡æ¯è¡¨**  
  
---|---|---  
  
**åºå·**

|

**å­—æ®µåç§°**

|

**å­—æ®µè¯´æ˜**

|

**ç±»å‹**

|

**å±æ€§**

|

**å¤‡æ³¨**  
  
**1**

|

**id**

|

**ç¼–å·**

|

**int**

|

**éç©º**

|

**ä¸»é”®,è‡ªå¢1**  
  
**2**

|

**title**

|

**æ ‡é¢˜**

|

**varchar(32)**

|

**éç©º**

|

** **  
  
**3**

|

**author**

|

**ä½œè€…**

|

**varchar(16)**

|

**å¯ä»¥ç©º**

|

** **  
  
**4**

|

**addtime**

|

**ç•™è¨€æ—¶é—´**

|

**datetime**

|

**éç©º**

|

** **  
  
**5**

|

**content**

|

**ç•™è¨€å†…å®¹**

|

**text**

|

**éç©º**

|

** **  
  
**6**

|

**isdelete**

|

**æ˜¯å¦åˆ é™¤**

|

**char(1)**

|

**éç©º**

|

**é»˜è®¤å€¼ 0**  
      
    
     CREATE TABLE `message` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `title` varchar(32) NOT NULL,
      `author` varchar(16) DEFAULT NULL,
      `addtime` datetime DEFAULT NULL,
      `content` text,
      `status` char(1) NOT NULL DEFAULT '0',
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

**3.åœ¨ç•™è¨€è¡¨æœ€åæ·»åŠ ä¸€åˆ—çŠ¶æ€ï¼ˆstatus   char(1)  é»˜è®¤å€¼ä¸º0ï¼‰**

**4.ä¿®æ”¹ç•™è¨€è¡¨authorçš„é»˜è®¤å€¼ä¸º 'youku',è®¾ä¸ºéç©º**

**5.åˆ é™¤messageè¡¨ä¸­çš„isdeleteå­—æ®µ**

**6.ä¸ºç•™è¨€è¡¨æ·»åŠ  >5æ¡æµ‹è¯•æ•°æ®**

    
    
    INSERT INTO `message` VALUES ('1', 'ä»‹ç»', 'å¤§é›„', '2017-02-14 09:59:37', 'å“¥ä¸æ˜¯ä¸€åŒ¹å¥½é©¬ï¼Œä½†ä¹Ÿä¸æ˜¯ä¸€å¤´æ™®é€šçš„æ¯›é©´', '0');
    INSERT INTO `message` VALUES ('2', 'å®å½“çŒ«', 'ç†Šç†Š', '2016-02-16 09:59:44', 'ä½ ç‰™ç¼é‡Œæœ‰éŸ­èœï¼Œæ‰£å‡ºæ¥è´¼å“¥åƒ', '0');
    INSERT INTO `message` VALUES ('3', 'èŠ±èŠ±', 'è‹—è‹—', '2017-05-28 09:59:52', 'è‹—è‹—é—®èŠ±èŠ±:å–èŒæ˜¯è¤’ä¹‰è¯è¿˜æ˜¯è´¬ä¹‰è¯ï¼Ÿ', '0');
    INSERT INTO `message` VALUES ('4', 'éœå“¥', 'å¤§é›„', '2017-08-29 09:59:57', 'æ–—æˆ˜è‰²ä½›', '0');
    INSERT INTO `message` VALUES ('5', 'æ™¨æ™¨', 'é€—æ¯”', '2010-06-22 10:00:03', 'ä½ ç¬‘èµ·æ¥åƒä¸€æœµèŠèŠ±,èŠèŠ±æ®‹ï¼Œmanè…šä¼¤', '0'); ****

**7\. è¦æ±‚å°†idå€¼å¤§äº3çš„ä¿¡æ¯ä¸­authorå­—æ®µå€¼æ”¹ä¸ºadmin**

    
    
    update message set author= 'admin' where id>3;

**8\. åˆ é™¤idå·ä¸º4çš„æ•°æ®ã€‚**

    
    
    delete  from message where id=4;

  * **ä¸ºç•™è¨€è¡¨æ·»åŠ  >15æ¡æµ‹è¯•æ•°æ®ï¼Œè¦æ±‚åˆ†ä¸‰ä¸ªç”¨æˆ·æ·»åŠ **
  *     INSERT INTO `message` VALUES ('6', 'æ™¨æ™¨', 'é€—æ¯”', '2010-06-22 10:00:03', 'ä½ ç¬‘èµ·æ¥åƒä¸€æœµèŠèŠ±,èŠèŠ±æ®‹ï¼Œmanè…šä¼¤', '1');

  * **æŸ¥è¯¢æ‰€æœ‰ç•™è¨€ä¿¡æ¯**
  *     select *  from message;

  * **æŸ¥è¯¢æŸä¸€ç”¨æˆ·çš„ç•™è¨€ä¿¡æ¯ã€‚**
  *     select *  from message where author='ç”¨æˆ·å';

  * **æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼ŒæŒ‰æ—¶é—´é™åºæ’åºã€‚**
  *     select *  from message order by addtime desc;

  * **è·å–idåœ¨2åˆ°6ä¹‹é—´çš„ç•™è¨€ä¿¡æ¯ï¼Œå¹¶æŒ‰æ—¶é—´é™åºæ’åº**
  *     select *  from message where id>2 and id<6 order by addtime desc;

  * **ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·ç•™äº†å¤šå°‘æ¡ç•™è¨€ï¼Œå¹¶å¯¹æ•°é‡æŒ‰ä»å°åˆ°å¤§æ’åºã€‚**
  *      select author,COUNT(id) as 'ç•™è¨€æ¡æ•°' FROM message GROUP BY author ORDER BY COUNT(id) ASC;

  * **å°†idä¸º8ã€9çš„ä¸¤æ¡æ•°æ®çš„ä½œè€…æ”¹ä¸º 'doudou'.**
  *     update message set author='doudou' where id=8 or id=9;

  * ****å–å‡ºæœ€æ–°çš„ä¸‰æ¡ç•™è¨€ã€‚****
  *      select * from message order by addtime desc limit 3;

  * **æŸ¥è¯¢ç•™è¨€è€…ä¸­åŒ…å« "a"å­—æ¯çš„ç•™è¨€ä¿¡æ¯ï¼Œå¹¶æŒ‰ç•™è¨€æ—¶é—´ä»å°åˆ°å¤§æ’åº**
  *     select * from message where author like '%a%' order by 'addtime' desc;

  * **åˆ é™¤ "ä½œè€…"é‡å¤çš„æ•°æ®,å¹¶ä¿ç•™idæœ€å¤§çš„ä¸€ä¸ªä½œè€…**
  *     delete from message where author in(
        select author from (select author from message group by author having count(1)>1) a
    )
    and id not in(
        select id from (select max(id) id from message group by author having count(1)>1) b
    )




