---
title: MySQL ä¹‹ åº“æ“ä½œ
date: 2018-02-28 10:39:00
categories:
- ç¬”è®°
- åšå®¢å›­
tags:
- åšå®¢å›­
- æ¬å®¶
- cnblogs
---
# [è¿™æ˜¯ğŸ‘‰MySQL ä¹‹ åº“æ“ä½œğŸ‘ˆçš„æ‘˜è¦](/2018/02/28/cnblog_8485174/)
<!--more-->
# **é˜…è¯»ç›®å½•:**

  * **ä¸€ ç³»ç»Ÿæ•°æ®åº“**
  * **äºŒ æ•°æ®åº“æ“ä½œ**
  * **ä¸‰ å‘½åè§„èŒƒ**
  * **å›› ç”¨æˆ·æƒé™**
  * **äº”.ä¿®æ”¹å¯†ç **
  * **å…­  å¿˜è®°å¯†ç **
  * **ä¸ƒ  ä¸­æ–‡ä¹±ç é—®é¢˜**

## ä¸€.ç³»ç»Ÿæ•°æ®åº“

  * information_schema ï¼šè™šæ‹Ÿåº“ï¼Œä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œå­˜å‚¨çš„æ˜¯æ•°æ®åº“å¯åŠ¨åçš„ä¸€äº›å‚æ•°ï¼Œå¦‚ç”¨æˆ·è¡¨ä¿¡æ¯ã€åˆ—ä¿¡æ¯ã€æƒé™ä¿¡æ¯ã€å­—ç¬¦ä¿¡æ¯ç­‰
  * mysqlï¼šæ ¸å¿ƒæ•°æ®åº“ï¼Œé‡Œé¢åŒ…å«ç”¨æˆ·ã€æƒé™ã€å…³é”®å­—ç­‰ä¿¡æ¯ã€‚ä¸å¯ä»¥åˆ é™¤
  * performance_schemaï¼šmysql 5.5ç‰ˆæœ¬åæ·»åŠ çš„æ–°åº“ï¼Œä¸»è¦æ”¶é›†ç³»ç»Ÿæ€§èƒ½å‚æ•°ï¼Œè®°å½•å¤„ç†æŸ¥è¯¢è¯·æ±‚æ—¶å‘ç”Ÿçš„å„ç§äº‹ä»¶ã€é”ç­‰ç°è±¡ 
  * sys : mysql5.7ç‰ˆæœ¬æ–°å¢åŠ çš„åº“,é€šè¿‡è¿™ä¸ªåº“å¯ä»¥å¿«é€Ÿçš„äº†è§£ç³»ç»Ÿçš„å…ƒæ•°æ®ä¿¡æ¯,å¯ä»¥æ–¹ä¾¿DBAå‘ç°æ•°æ®åº“çš„å¾ˆå¤šä¿¡æ¯ï¼Œè§£å†³æ€§èƒ½ç“¶é¢ˆéƒ½æä¾›äº†å·¨å¤§å¸®åŠ©

## äºŒ.æ•°æ®åº“æ“ä½œ

1.åˆ›å»ºæ•°æ®åº“

    
    
    #è¯­æ³•: CREATE DATABASE db_name charset utf8;

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

    
    
    #åˆ›å»ºä¸€ä¸ªåå­—ä¸º db_name çš„æ•°æ®åº“,å¹¶æŒ‡å®šå½“å‰åº“çš„ç¼–ç é›†ä¸ºutf8
    
    CREATE DATABASE db_name charset utf8;

ç¤ºä¾‹

2.æŸ¥çœ‹æ•°æ®åº“

    
    
    #æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¸‹æ‰€æœ‰æ•°æ®åº“
    show databases;
    
    #æŸ¥çœ‹åˆ›å»ºæ•°æ®åº“çš„ä¿¡æ¯
    show create database db_name;
    
    #æŸ¥è¯¢å½“å‰æ“ä½œæ‰€åœ¨çš„æ•°æ®åº“åç§°
    select database();

3.é€‰æ‹©æ•°æ®åº“

    
    
    USE db_name;
    

4.åˆ é™¤æ•°æ®åº“

    
    
    DROP DATABASE db_name;

##  ä¸‰.å‘½åè§„èŒƒ

    
    
    å¯ä»¥ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ï¼ ã€ï¼ƒã€ï¼„
    åŒºåˆ†å¤§å°å†™
    å”¯ä¸€æ€§
    ä¸èƒ½ä½¿ç”¨å…³é”®å­—å¦‚: CREATE SELECT
    ä¸èƒ½å•ç‹¬ä½¿ç”¨æ•°å­—
    æœ€é•¿128ä½

## å››.ç”¨æˆ·æƒé™

1.ç”¨æˆ·ç®¡ç†

    
    
    åˆ›å»ºç”¨æˆ·
        create user 'ç”¨æˆ·å'@'IPåœ°å€' identified by 'å¯†ç ';
    åˆ é™¤ç”¨æˆ·
        drop user 'ç”¨æˆ·å'@'IPåœ°å€';
    ä¿®æ”¹ç”¨æˆ·
        rename user 'ç”¨æˆ·å'@'IPåœ°å€'; to 'æ–°ç”¨æˆ·å'@'IPåœ°å€';

2.æˆæƒç®¡ç†

    
    
    show grants for 'ç”¨æˆ·'@'IPåœ°å€'                  -- æŸ¥çœ‹æƒé™
    grant  æƒé™ on æ•°æ®åº“.è¡¨ to   'ç”¨æˆ·'@'IPåœ°å€'      -- æˆæƒ
    revoke æƒé™ on æ•°æ®åº“.è¡¨ from 'ç”¨æˆ·'@'IPåœ°å€'      -- å–æ¶ˆæƒé™
    

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

    
    
    #åˆ›å»ºæ–°ç”¨æˆ·
    create user 'alex'@'localhost' identified '123456';
    
    #æˆæƒæ–¹å¼ä¸€:ä¸ºalexæˆæƒ db1æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨çš„ æŸ¥è¯¢.æ›´æ–°.ä¿®æ”¹æƒé™
    grant select,update,delete on db1.*  to 'alex'@'localhost';
    
    #æˆæƒæ–¹å¼äºŒ:ä¸ºalex æˆæƒ æ‰€æœ‰åº“çš„æ‰€æœ‰æƒé™(é™¤grantæƒé™å¤–)
    grant all privileges on *.*  to 'alex'@'localhost';
    
    #åˆ·æ–°ç”¨æˆ·æƒé™
    flush privileges;

åˆ›å»ºç”¨æˆ·åŠæˆæƒä¾‹å­

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

    
    
                all privileges  é™¤grantå¤–çš„æ‰€æœ‰æƒé™
                select          ä»…æŸ¥æƒé™
                select,insert   æŸ¥å’Œæ’å…¥æƒé™
                ...
                usage                   æ— è®¿é—®æƒé™
                alter                   ä½¿ç”¨alter table
                alter routine           ä½¿ç”¨alter procedureå’Œdrop procedure
                create                  ä½¿ç”¨create table
                create routine          ä½¿ç”¨create procedure
                create temporary tables ä½¿ç”¨create temporary tables
                create user             ä½¿ç”¨create userã€drop userã€rename userå’Œrevoke  all privileges
                create view             ä½¿ç”¨create view
                delete                  ä½¿ç”¨delete
                drop                    ä½¿ç”¨drop table
                execute                 ä½¿ç”¨callå’Œå­˜å‚¨è¿‡ç¨‹
                file                    ä½¿ç”¨select into outfile å’Œ load data infile
                grant option            ä½¿ç”¨grant å’Œ revoke
                index                   ä½¿ç”¨index
                insert                  ä½¿ç”¨insert
                lock tables             ä½¿ç”¨lock table
                process                 ä½¿ç”¨show full processlist
                select                  ä½¿ç”¨select
                show databases          ä½¿ç”¨show databases
                show view               ä½¿ç”¨show view
                update                  ä½¿ç”¨update
                reload                  ä½¿ç”¨flush
                shutdown                ä½¿ç”¨mysqladmin shutdown(å…³é—­MySQL)
                super                   ä½¿ç”¨change masterã€killã€logsã€purgeã€masterå’Œset globalã€‚è¿˜å…è®¸mysqladminè°ƒè¯•ç™»é™†
                replication client      æœåŠ¡å™¨ä½ç½®çš„è®¿é—®
                replication slave       ç”±å¤åˆ¶ä»å±ä½¿ç”¨

æƒé™åˆ—è¡¨

## äº”.ä¿®æ”¹å¯†ç 

**æ–¹å¼ä¸€:** mysqladmin å‘½ä»¤

    
    
    mysqladmin -uç”¨æˆ·å -på¯†ç  password æ–°å¯†ç 

**æ–¹å¼äºŒ** : ç›´æ¥è®¾ç½®ç”¨æˆ·å¯†ç 

    
    
    set password for 'ç”¨æˆ·å'@'IP' = password('æ–°å¯†ç ');
    			
    flush privileges;

**æ–¹å¼ä¸‰:** ä¿®æ”¹mysqlåº“ä¸‹çš„userè¡¨

    
    
    5.7ç‰ˆæœ¬ä¿®æ”¹å¯†ç æ–¹å¼:
    update mysql.user set authentication_string=password('æ–°å¯†ç ') where user= 'ç”¨æˆ·å' 			
    flush privileges; -- åˆ·æ–°æƒé™
    			
    5.6 ç‰ˆæœ¬
    update mysql.user set password = password('æ–°å¯†ç ') where user= 'ç”¨æˆ·å' 
    flush privileges; -- åˆ·æ–°æƒé™

## å…­.å¿˜è®°å¯†ç 

    
    
    åœ¨å¿˜è®°rootå¯†ç çš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·:
    
    #1.é¦–å…ˆæ‰“å¼€cmd çª—å£,å…³é—­mysqlæœåŠ¡
        net stop mysql 
    
    #2.ç„¶åè·³è¿‡æƒé™æ£€æŸ¥,å¯åŠ¨mysql,è¾“å…¥å‘½ä»¤
        mysqld --skip-grant-tables
    
    #3.é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„cmdçª—å£,å¯åŠ¨å®¢æˆ·ç«¯(å·²è·³è¿‡æƒé™æ£€æŸ¥,å¯ä»¥ç›´æ¥ç™»å½•)
        mysql 
    
    #4.ç›´æ¥è¿›æ¥,ä¿®æ”¹å¯†ç 
    update mysql.user set authentication_string=password('123456') where user='root';
    
    #5. åˆ·æ–°æƒé™
    flush privileges;

## ä¸ƒ.ä¸­æ–‡ä¹±ç é—®é¢˜

1.æŸ¥è¯¢å­—ç¬¦ç¼–ç 

    
    
    SHOW VARIABLES LIKE 'char%';
    

2.åˆ¶æœä¹±ç 

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

    
    
    #ä¿®æ”¹æ–¹æ³•:
    #1. åˆ›å»ºmy.iniæ–‡ä»¶,æ”¾åœ¨mysqlæ ¹è·¯å¾„ä¸‹
    #2. åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯:
    #3.æ·»åŠ æ­¤æ–‡ä»¶åéœ€è¦é‡æ–°å¯åŠ¨æœåŠ¡,ä»¥ä¿è¯æ­¤æ–‡ä»¶ç”Ÿæ•ˆ
    ------------------------------------------------------------
    [client]
    
    default-character-set=utf8
    
    [mysql]
    
    #è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†
    
    default-character-set=utf8
    
    [mysqld]
    
    #è®¾ç½®3306ç«¯å£
    
    port = 3306
    
    #å…è®¸æœ€å¤§è¿æ¥æ•°
    
    max_connections=200
    
    #æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†
    
    character-set-server=utf8
    
    #åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“
    
    default-storage-engine=INNODB
    
    #è§£å†³mysqlåœ¨æ‰§è¡Œsqlè¯­å¥åå‡ºç°1055é”™è¯¯,sql_mode = only_full_group_byä¸ç›¸å®¹
    
    sql_mode='NO_ENGINE_SUBSTITUTION'

ä¹±ç å·²æ­»

 æ³¨æ„:å¦‚æœä½¿ç”¨çš„æ˜¯mysql5.7ç‰ˆæœ¬,åˆ™éœ€è¦åˆ›å»ºmy.iniæ–‡ä»¶,5.7ç‰ˆæœ¬ä»¥å‰æ•°æ®åº“è‡ªå¸¦my,iniæ–‡ä»¶,ç›´æ¥æ”¹åŠ¨ç¼–ç å³å¯.

 ç›®å‰æœ€ç¨³å®šä¸å¸¸ç”¨çš„æ•°æ®åº“ç‰ˆæœ¬ä¸º(5.6ç‰ˆæœ¬ä¸5.5ç‰ˆæœ¬)


