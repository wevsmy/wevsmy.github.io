---
title: python3 ä¸‹è½½å¿…åº”æ¯æ—¥å£çº¸ï¼ˆä¸€ï¼‰
date: 2018-01-30 10:53:00
categories:
- ç¬”è®°
- åšå®¢å›­
tags:
- åšå®¢å›­
- æ¬å®¶
- cnblogs
---
# [è¿™æ˜¯ğŸ‘‰python3 ä¸‹è½½å¿…åº”æ¯æ—¥å£çº¸ï¼ˆä¸€ï¼‰ğŸ‘ˆçš„æ‘˜è¦](/2018/01/30/cnblog_8386598/)
<!--more-->
# ç¯å¢ƒï¼š

### win10ï¼Œpython3

## å‰è¨€:

æƒ³æ¢å£çº¸äº†ï¼Œsoï¼Œæœæœgithub,å‘ç°æœ‰æœ‰äººç”¨pythonå†™çš„è·å–å¿…åº”æ¯æ—¥å£çº¸ï¼Œçœ‹äº†çœ‹ï¼Œä¹Ÿä¸éš¾ï¼Œå°±è‡ªå·±ä¹Ÿå†™äº†ä¸€ä¸ª

é¦–å…ˆï¼šæ‰¾åˆ°äº†ä¸€ä¸ªå¿…åº”çš„API  
    
    
    json_url = "http://cn.bing.com/HPImageArchive.aspx?format=js&n=1&idx=0"

æ”¹apiè¿”å›jsonæ•°æ®ï¼Œ

å‚æ•°nä»£è¡¨è¿”å›å‡ æ¡

å‚æ•°idxä»£è¡¨è¿”å›é‚£ä¸€å¤©çš„ï¼Œ0æ˜¯ä»Šå¤©çš„ï¼Œ-1æ˜¯æ˜å¤©çš„ï¼Œ1æ˜¯æ˜¨å¤©çš„

## æµç¨‹ï¼š

è·å–jsonæ•°æ®è§£æå‡ºæ—¶é—´ï¼Œæ–‡ä»¶åï¼Œå›¾ç‰‡url

ç„¶åä¸‹è½½

code

    
    
    import json
    from urllib import request
    import os
    
    
    class BingWallpaper():
        """ä¸‹è½½å¿…åº”å£çº¸"""
        def __init__(self):
            self.filePath = "G:\Pictures\DesktoBackGround"
            self.hosts = "http://cn.bing.com"
            self.imgDate = ""
            self.imgUrl = ""
            self.imgFileName = ""
    
        def __get_json_data(self, idx = 0):
            # idx = 0æ˜¯ä»Šå¤©çš„ï¼Œ-1æ˜å¤©ï¼Œ1æ˜¨å¤©
            json_url = self.hosts+"/HPImageArchive.aspx?format=js&n=1&idx={}".format(idx)
            try:
                data = request.urlopen(json_url).read().decode("utf-8")
                json_data = json.loads(data)
                self.imgDate = json_data["images"][0]["enddate"]
                self.imgUrl = self.hosts + json_data["images"][0]["url"]
                self.imgFileName = self.imgDate+"_"+json_data["images"][0]["url"].split("/")[4]
            except Exception as f:
                print("get_json_data:",f)
    
        def __down_img(self):
            with request.urlopen(self.imgUrl) as f:
                data = f.read()  
    ã€€ã€€ã€€ã€€ã€€ã€€ã€€# å›¾ç‰‡å­˜çš„è·¯å¾„ä¸º G:\Pictures\DesktoBackGroundç›®å½•
                with open(str(self.filePath+os.sep+self.imgFileName), mode="wb") as f:
                    f.write(data)
    
        def save_img(self, idx = 0):
            self.__get_json_data(idx)
            self.__down_img()
            print("{}download!".format(self.imgFileName))
    
    if __name__ == '__main__':
        print("path:",__file__)
        print("run...")
        wall = BingWallpaper()
        wall.save_img()
        print("end!")
        exit = input("please enter any key to exit...")




