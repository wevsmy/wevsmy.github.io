---
title: python è£…é¥°å™¨
date: 2017-12-28 02:23:00
categories:
- ç¬”è®°
- åšå®¢å›­
tags:
- åšå®¢å›­
- æ¬å®¶
- cnblogs
---
# [è¿™æ˜¯ğŸ‘‰python è£…é¥°å™¨ğŸ‘ˆçš„æ‘˜è¦](/2017/12/28/cnblog_8134274/)
<!--more-->
# è£…é¥°å™¨

è£…é¥°å™¨æ˜¯ç¨‹åºå¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨å¥½äº†è£…é¥°å™¨ï¼Œå¼€å‘æ•ˆç‡å¦‚è™æ·»ç¿¼ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯Pythoné¢è¯•ä¸­å¿…é—®çš„é—®é¢˜ï¼Œä½†å¯¹äºå¥½å¤šåˆæ¬¡æ¥è§¦è¿™ä¸ªçŸ¥è¯†çš„äººæ¥è®²ï¼Œè¿™ä¸ªåŠŸèƒ½æœ‰ç‚¹ç»•ï¼Œè‡ªå­¦æ—¶ç›´æ¥ç»•è¿‡å»äº†ï¼Œç„¶åé¢è¯•é—®åˆ°äº†å°±æŒ‚äº†ï¼Œå› ä¸ºè£…é¥°å™¨æ˜¯ç¨‹åºå¼€å‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™ä¸ªéƒ½ä¸ä¼šï¼Œåˆ«è·Ÿäººå®¶è¯´ä½ ä¼šPython,
çœ‹äº†ä¸‹é¢çš„æ–‡ç« ï¼Œä¿è¯ä½ å­¦ä¼šè£…é¥°å™¨ã€‚

## 1ã€å…ˆæ˜ç™½è¿™æ®µä»£ç 

    
    
    #### ç¬¬ä¸€æ³¢ ####
    def foo():
        print('foo')
    
    foo     #è¡¨ç¤ºæ˜¯å‡½æ•°
    foo()   #è¡¨ç¤ºæ‰§è¡Œfooå‡½æ•°
    
    #### ç¬¬äºŒæ³¢ ####
    def foo():
        print('foo')
    
    foo = lambda x: x + 1
    
    foo()   # æ‰§è¡Œä¸‹é¢çš„lambdaè¡¨è¾¾å¼ï¼Œè€Œä¸å†æ˜¯åŸæ¥çš„fooå‡½æ•°ï¼Œå› ä¸ºfooè¿™ä¸ªåå­—è¢«é‡æ–°æŒ‡å‘äº†å¦å¤–ä¸€ä¸ªåŒ¿åå‡½æ•°

## 2ã€éœ€æ±‚æ¥äº†

åˆåˆ›å…¬å¸æœ‰Nä¸ªä¸šåŠ¡éƒ¨é—¨ï¼Œ1ä¸ªåŸºç¡€å¹³å°éƒ¨é—¨ï¼ŒåŸºç¡€å¹³å°è´Ÿè´£æä¾›åº•å±‚çš„åŠŸèƒ½ï¼Œå¦‚ï¼šæ•°æ®åº“æ“ä½œã€redisè°ƒç”¨ã€ç›‘æ§APIç­‰åŠŸèƒ½ã€‚ä¸šåŠ¡éƒ¨é—¨ä½¿ç”¨åŸºç¡€åŠŸèƒ½æ—¶ï¼Œåªéœ€è°ƒç”¨åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½å³å¯ã€‚å¦‚ä¸‹ï¼š

    
    
    ############### åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½å¦‚ä¸‹ ###############
    
    def f1():
        print('f1')
    
    def f2():
        print('f2')
    
    def f3():
        print('f3')
    
    def f4():
        print('f4')
    
    ############### ä¸šåŠ¡éƒ¨é—¨A è°ƒç”¨åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½ ###############
    
    f1()
    f2()
    f3()
    f4()
    
    ############### ä¸šåŠ¡éƒ¨é—¨B è°ƒç”¨åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½ ###############
    
    f1()
    f2()
    f3()
    f4()

ç›®å‰å…¬å¸æœ‰æ¡ä¸ç´Šçš„è¿›è¡Œç€ï¼Œä½†æ˜¯ï¼Œä»¥å‰åŸºç¡€å¹³å°çš„å¼€å‘äººå‘˜åœ¨å†™ä»£ç æ—¶å€™æ²¡æœ‰å…³æ³¨éªŒè¯ç›¸å…³çš„é—®é¢˜ï¼Œå³ï¼šåŸºç¡€å¹³å°çš„æä¾›çš„åŠŸèƒ½å¯ä»¥è¢«ä»»ä½•äººä½¿ç”¨ã€‚ç°åœ¨éœ€è¦å¯¹åŸºç¡€å¹³å°çš„æ‰€æœ‰åŠŸèƒ½è¿›è¡Œé‡æ„ï¼Œä¸ºå¹³å°æä¾›çš„æ‰€æœ‰åŠŸèƒ½æ·»åŠ éªŒè¯æœºåˆ¶ï¼Œå³ï¼šæ‰§è¡ŒåŠŸèƒ½å‰ï¼Œå…ˆè¿›è¡ŒéªŒè¯ã€‚

#### è€å¤§æŠŠå·¥ä½œäº¤ç»™ Low Bï¼Œä»–æ˜¯è¿™ä¹ˆåšçš„ï¼š

> è·Ÿæ¯ä¸ªä¸šåŠ¡éƒ¨é—¨äº¤æ¶‰ï¼Œæ¯ä¸ªä¸šåŠ¡éƒ¨é—¨è‡ªå·±å†™ä»£ç ï¼Œè°ƒç”¨åŸºç¡€å¹³å°çš„åŠŸèƒ½ä¹‹å‰å…ˆéªŒè¯ã€‚è¯¶ï¼Œè¿™æ ·ä¸€æ¥åŸºç¡€å¹³å°å°±ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹äº†ã€‚å¤ªæ£’äº†ï¼Œæœ‰å……è¶³çš„æ—¶é—´æ³¡å¦¹å­...

å½“å¤©Low B è¢«å¼€é™¤äº†â€¦

#### è€å¤§æŠŠå·¥ä½œäº¤ç»™ Low BBï¼Œä»–æ˜¯è¿™ä¹ˆåšçš„ï¼š

    
    
    ############### åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½å¦‚ä¸‹ ############### 
    
    def f1():
        # éªŒè¯1
        # éªŒè¯2
        # éªŒè¯3
        print('f1')
    
    def f2():
        # éªŒè¯1
        # éªŒè¯2
        # éªŒè¯3
        print('f2')
    
    def f3():
        # éªŒè¯1
        # éªŒè¯2
        # éªŒè¯3
        print('f3')
    
    def f4():
        # éªŒè¯1
        # éªŒè¯2
        # éªŒè¯3
        print('f4')
    
    ############### ä¸šåŠ¡éƒ¨é—¨ä¸å˜ ############### 
    ### ä¸šåŠ¡éƒ¨é—¨A è°ƒç”¨åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½### 
    
    f1()
    f2()
    f3()
    f4()
    
    ### ä¸šåŠ¡éƒ¨é—¨B è°ƒç”¨åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½ ### 
    
    f1()
    f2()
    f3()
    f4()

è¿‡äº†ä¸€å‘¨ Low BB è¢«å¼€é™¤äº†â€¦

#### è€å¤§æŠŠå·¥ä½œäº¤ç»™ Low BBBï¼Œä»–æ˜¯è¿™ä¹ˆåšçš„ï¼š

> åªå¯¹åŸºç¡€å¹³å°çš„ä»£ç è¿›è¡Œé‡æ„ï¼Œå…¶ä»–ä¸šåŠ¡éƒ¨é—¨æ— éœ€åšä»»ä½•ä¿®æ”¹

    
    
    ############### åŸºç¡€å¹³å°æä¾›çš„åŠŸèƒ½å¦‚ä¸‹ ############### 
    
    def check_login():
        # éªŒè¯1
        # éªŒè¯2
        # éªŒè¯3
        pass
    
    
    def f1():
    
        check_login()
    
        print('f1')
    
    def f2():
    
        check_login()
    
        print('f2')
    
    def f3():
    
        check_login()
    
        print('f3')
    
    def f4():
    
        check_login()
    
        print('f4')

è€å¤§çœ‹äº†ä¸‹Low BBB çš„å®ç°ï¼Œå˜´è§’æ¼å‡ºäº†ä¸€ä¸çš„æ¬£æ…°çš„ç¬‘ï¼Œè¯­é‡å¿ƒé•¿çš„è·ŸLow BBBèŠäº†ä¸ªå¤©ï¼š

##### è€å¤§è¯´ï¼š

å†™ä»£ç è¦éµå¾ª`å¼€æ”¾å°é—­`åŸåˆ™ï¼Œè™½ç„¶åœ¨è¿™ä¸ªåŸåˆ™æ˜¯ç”¨çš„é¢å‘å¯¹è±¡å¼€å‘ï¼Œä½†æ˜¯ä¹Ÿé€‚ç”¨äºå‡½æ•°å¼ç¼–ç¨‹ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒè§„å®šå·²ç»å®ç°çš„åŠŸèƒ½ä»£ç ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œä½†å¯ä»¥è¢«æ‰©å±•ï¼Œå³ï¼š

  * å°é—­ï¼šå·²å®ç°çš„åŠŸèƒ½ä»£ç å—
  * å¼€æ”¾ï¼šå¯¹æ‰©å±•å¼€å‘

å¦‚æœå°†å¼€æ”¾å°é—­åŸåˆ™åº”ç”¨åœ¨ä¸Šè¿°éœ€æ±‚ä¸­ï¼Œé‚£ä¹ˆå°±ä¸å…è®¸åœ¨å‡½æ•° f1 ã€f2ã€f3ã€f4çš„å†…éƒ¨è¿›è¡Œä¿®æ”¹ä»£ç ï¼Œè€æ¿å°±ç»™äº†Low BBBä¸€ä¸ªå®ç°æ–¹æ¡ˆï¼š

    
    
    def w1(func):
        def inner():
            # éªŒè¯1
            # éªŒè¯2
            # éªŒè¯3
            func()
        return inner
    
    @w1
    def f1():
        print('f1')
    @w1
    def f2():
        print('f2')
    @w1
    def f3():
        print('f3')
    @w1
    def f4():
        print('f4')

å¯¹äºä¸Šè¿°ä»£ç ï¼Œä¹Ÿæ˜¯ä»…ä»…å¯¹åŸºç¡€å¹³å°çš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå°±å¯ä»¥å®ç°åœ¨å…¶ä»–äººè°ƒç”¨å‡½æ•° f1 f2 f3 f4 ä¹‹å‰éƒ½è¿›è¡Œã€éªŒè¯ã€‘æ“ä½œï¼Œå¹¶ä¸”å…¶ä»–ä¸šåŠ¡éƒ¨é—¨æ— éœ€åšä»»ä½•æ“ä½œã€‚

Low BBBå¿ƒæƒŠèƒ†æˆ˜çš„é—®äº†ä¸‹ï¼Œè¿™æ®µä»£ç çš„å†…éƒ¨æ‰§è¡ŒåŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

è€å¤§æ­£è¦ç”Ÿæ°”ï¼Œçªç„¶Low BBBçš„æ‰‹æœºæ‰åˆ°åœ°ä¸Šï¼Œæ°å·§å±ä¿å°±æ˜¯Low BBBçš„å¥³å‹ç…§ç‰‡ï¼Œè€å¤§ä¸€çœ‹ä¸€ç´§ä¸€æŠ–ï¼Œå–œç¬‘é¢œå¼€ï¼Œå†³å®šå’ŒLow BBBäº¤ä¸ªå¥½æœ‹å‹ã€‚

è¯¦ç»†çš„å¼€å§‹è®²è§£äº†ï¼š

å•ç‹¬ä»¥f1ä¸ºä¾‹ï¼š

    
    
    def w1(func):
        def inner():
            # éªŒè¯1
            # éªŒè¯2
            # éªŒè¯3
            func()
        return inner
    
    @w1
    def f1():
        print('f1')

pythonè§£é‡Šå™¨å°±ä¼šä»ä¸Šåˆ°ä¸‹è§£é‡Šä»£ç ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š

  1. def w1(func): ==>å°†w1å‡½æ•°åŠ è½½åˆ°å†…å­˜
  2. @w1

æ²¡é”™ï¼Œ ä»è¡¨é¢ä¸Šçœ‹è§£é‡Šå™¨ä»…ä»…ä¼šè§£é‡Šè¿™ä¸¤å¥ä»£ç ï¼Œå› ä¸ºå‡½æ•°åœ¨ æ²¡æœ‰è¢«è°ƒç”¨ä¹‹å‰å…¶å†…éƒ¨ä»£ç ä¸ä¼šè¢«æ‰§è¡Œã€‚

ä»è¡¨é¢ä¸Šçœ‹è§£é‡Šå™¨ç€å®ä¼šæ‰§è¡Œè¿™ä¸¤å¥ï¼Œä½†æ˜¯ @w1 è¿™ä¸€å¥ä»£ç é‡Œå´æœ‰å¤§æ–‡ç« ï¼Œ @å‡½æ•°å æ˜¯pythonçš„ä¸€ç§è¯­æ³•ç³–ã€‚

### ä¸Šä¾‹@w1å†…éƒ¨ä¼šæ‰§è¡Œä¸€ä¸‹æ“ä½œï¼š

#### æ‰§è¡Œw1å‡½æ•°

> æ‰§è¡Œw1å‡½æ•° ï¼Œå¹¶å°† @w1 ä¸‹é¢çš„å‡½æ•°ä½œä¸ºw1å‡½æ•°çš„å‚æ•°ï¼Œå³ï¼š@w1 ç­‰ä»·äº w1(f1) æ‰€ä»¥ï¼Œå†…éƒ¨å°±ä¼šå»æ‰§è¡Œï¼š

>  
>  
>     def inner():

>         #éªŒè¯ 1

>         #éªŒè¯ 2

>         #éªŒè¯ 3

>         f1()     # funcæ˜¯å‚æ•°ï¼Œæ­¤æ—¶ func ç­‰äº f1

>     return inner# è¿”å›çš„ innerï¼Œinnerä»£è¡¨çš„æ˜¯å‡½æ•°ï¼Œéæ‰§è¡Œå‡½æ•° ,å…¶å®å°±æ˜¯å°†åŸæ¥çš„ f1 å‡½æ•°å¡è¿›å¦å¤–ä¸€ä¸ªå‡½æ•°ä¸­

#### w1çš„è¿”å›å€¼

> å°†æ‰§è¡Œå®Œçš„w1å‡½æ•°è¿”å›å€¼ èµ‹å€¼ ç»™@w1ä¸‹é¢çš„å‡½æ•°çš„å‡½æ•°åf1 å³å°†w1çš„è¿”å›å€¼å†é‡æ–°èµ‹å€¼ç»™ f1ï¼Œå³ï¼š

>  
>  
>     æ–°f1 = def inner():

>                 #éªŒè¯ 1

>                 #éªŒè¯ 2

>                 #éªŒè¯ 3

>                 åŸæ¥f1()

>             return inner

>

> æ‰€ä»¥ï¼Œä»¥åä¸šåŠ¡éƒ¨é—¨æƒ³è¦æ‰§è¡Œ f1 å‡½æ•°æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ æ–°f1 å‡½æ•°ï¼Œåœ¨æ–°f1 å‡½æ•°å†…éƒ¨å…ˆæ‰§è¡ŒéªŒè¯ï¼Œå†æ‰§è¡ŒåŸæ¥çš„f1å‡½æ•°ï¼Œç„¶åå°†åŸæ¥f1
å‡½æ•°çš„è¿”å›å€¼è¿”å›ç»™äº†ä¸šåŠ¡è°ƒç”¨è€…ã€‚

å¦‚æ­¤ä¸€æ¥ï¼Œ å³æ‰§è¡Œäº†éªŒè¯çš„åŠŸèƒ½ï¼Œåˆæ‰§è¡Œäº†åŸæ¥f1å‡½æ•°çš„å†…å®¹ï¼Œå¹¶å°†åŸf1å‡½æ•°è¿”å›å€¼ è¿”å›ç»™ä¸šåŠ¡è°ƒç”¨ç€

Low BBB ä½ æ˜ç™½äº†å—ï¼Ÿè¦æ˜¯æ²¡æ˜ç™½çš„è¯ï¼Œæˆ‘æ™šä¸Šå»ä½ å®¶å¸®ä½ è§£å†³å§ï¼ï¼ï¼

## 3\. å†è®®è£…é¥°å™¨

    
    
    #å®šä¹‰å‡½æ•°ï¼šå®ŒæˆåŒ…è£¹æ•°æ®
    def makeBold(fn):
        def wrapped():
            return "<b>" + fn() + "</b>"
        return wrapped
    
    #å®šä¹‰å‡½æ•°ï¼šå®ŒæˆåŒ…è£¹æ•°æ®
    def makeItalic(fn):
        def wrapped():
            return "<i>" + fn() + "</i>"
        return wrapped
    
    @makeBold
    def test1():
        return "hello world-1"
    
    @makeItalic
    def test2():
        return "hello world-2"
    
    @makeBold
    @makeItalic
    def test3():
        return "hello world-3"
    
    print(test1()))
    print(test2()))
    print(test3()))
    è¿è¡Œç»“æœ:
    
    <b>hello world-1</b>
    <i>hello world-2</i>
    <b><i>hello world-3</i></b>

## 4\. è£…é¥°å™¨(decorator)åŠŸèƒ½

  1. å¼•å…¥æ—¥å¿—
  2. å‡½æ•°æ‰§è¡Œæ—¶é—´ç»Ÿè®¡
  3. æ‰§è¡Œå‡½æ•°å‰é¢„å¤‡å¤„ç†
  4. æ‰§è¡Œå‡½æ•°åæ¸…ç†åŠŸèƒ½
  5. æƒé™æ ¡éªŒç­‰åœºæ™¯
  6. ç¼“å­˜

## 5\. è£…é¥°å™¨ç¤ºä¾‹

### ä¾‹1:æ— å‚æ•°çš„å‡½æ•°

    
    
    from time import ctime, sleep
    
    def timefun(func):
        def wrappedfunc():
            print("%s called at %s"%(func.__name__, ctime()))
            func()
        return wrappedfunc
    
    @timefun
    def foo():
        print("I am foo")
    
    foo()
    sleep(2)
    foo()

ä¸Šé¢ä»£ç ç†è§£è£…é¥°å™¨æ‰§è¡Œè¡Œä¸ºå¯ç†è§£æˆ

    
    
    foo = timefun(foo)
    #fooå…ˆä½œä¸ºå‚æ•°èµ‹å€¼ç»™funcå,fooæ¥æ”¶æŒ‡å‘timefunè¿”å›çš„wrappedfunc
    foo()
    #è°ƒç”¨foo(),å³ç­‰ä»·è°ƒç”¨wrappedfunc()
    #å†…éƒ¨å‡½æ•°wrappedfuncè¢«å¼•ç”¨ï¼Œæ‰€ä»¥å¤–éƒ¨å‡½æ•°çš„funcå˜é‡(è‡ªç”±å˜é‡)å¹¶æ²¡æœ‰é‡Šæ”¾
    #funcé‡Œä¿å­˜çš„æ˜¯åŸfooå‡½æ•°å¯¹è±¡
    

### ä¾‹2:è¢«è£…é¥°çš„å‡½æ•°æœ‰å‚æ•°

    
    
    from time import ctime, sleep
    
    def timefun(func):
        def wrappedfunc(a, b):
            print("%s called at %s"%(func.__name__, ctime()))
            print(a, b)
            func(a, b)
        return wrappedfunc
    
    @timefun
    def foo(a, b):
        print(a+b)
    
    foo(3,5)
    sleep(2)
    foo(2,4)

### ä¾‹3:è¢«è£…é¥°çš„å‡½æ•°æœ‰ä¸å®šé•¿å‚æ•°

    
    
    from time import ctime, sleep
    
    def timefun(func):
        def wrappedfunc(*args, **kwargs):
            print("%s called at %s"%(func.__name__, ctime()))
            func(*args, **kwargs)
        return wrappedfunc
    
    @timefun
    def foo(a, b, c):
        print(a+b+c)
    
    foo(3,5,7)
    sleep(2)
    foo(2,4,9)

### ä¾‹4:è£…é¥°å™¨ä¸­çš„return

    
    
    from time import ctime, sleep
    
    def timefun(func):
        def wrappedfunc():
            print("%s called at %s"%(func.__name__, ctime()))
            func()
        return wrappedfunc
    
    @timefun
    def foo():
        print("I am foo")
    
    @timefun
    def getInfo():
        return '----hahah---'
    
    foo()
    sleep(2)
    foo()
    
    
    print(getInfo())

æ‰§è¡Œç»“æœ:

    
    
    foo called at Fri Nov  4 21:55:35 2016
    I am foo
    foo called at Fri Nov  4 21:55:37 2016
    I am foo
    getInfo called at Fri Nov  4 21:55:37 2016
    None
    

å¦‚æœä¿®æ”¹è£…é¥°å™¨ä¸º`return func()`ï¼Œåˆ™è¿è¡Œç»“æœï¼š

    
    
    foo called at Fri Nov  4 21:55:57 2016
    I am foo
    foo called at Fri Nov  4 21:55:59 2016
    I am foo
    getInfo called at Fri Nov  4 21:55:59 2016
    ----hahah---
    

#### æ€»ç»“ï¼š

  * ä¸€èˆ¬æƒ…å†µä¸‹ä¸ºäº†è®©è£…é¥°å™¨æ›´é€šç”¨ï¼Œå¯ä»¥æœ‰return

### ä¾‹5:è£…é¥°å™¨å¸¦å‚æ•°,åœ¨åŸæœ‰è£…é¥°å™¨çš„åŸºç¡€ä¸Šï¼Œè®¾ç½®å¤–éƒ¨å˜é‡

    
    
    #decorator2.py
    
    from time import ctime, sleep
    
    def timefun_arg(pre="hello"):
        def timefun(func):
            def wrappedfunc():
                print("%s called at %s %s"%(func.__name__, ctime(), pre))
                return func()
            return wrappedfunc
        return timefun
    
    @timefun_arg("itcast")
    def foo():
        print("I am foo")
    
    @timefun_arg("python")
    def too():
        print("I am too")
    
    foo()
    sleep(2)
    foo()
    
    too()
    sleep(2)
    too()

å¯ä»¥ç†è§£ä¸º

    
    
    foo()==timefun_arg("itcast")(foo)()
    

### ä¾‹6ï¼šç±»è£…é¥°å™¨ï¼ˆæ‰©å±•ï¼Œéé‡ç‚¹ï¼‰

è£…é¥°å™¨å‡½æ•°å…¶å®æ˜¯è¿™æ ·ä¸€ä¸ªæ¥å£çº¦æŸï¼Œå®ƒå¿…é¡»æ¥å—ä¸€ä¸ªcallableå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªcallableå¯¹è±¡ã€‚åœ¨Pythonä¸­ä¸€èˆ¬callableå¯¹è±¡éƒ½æ˜¯å‡½æ•°ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ã€‚åªè¦æŸä¸ªå¯¹è±¡é‡å†™äº†
`__call__()` æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯callableçš„ã€‚

    
    
    class Test():
        def __call__(self):
            print('call me!')
    
    t = Test()
    t()  # call me

ç±»è£…é¥°å™¨demo

    
    
    class Test(object):
        def __init__(self, func):
            print("---åˆå§‹åŒ–---")
            print("func name is %s"%func.__name__)
            self.__func = func
        def __call__(self):
            print("---è£…é¥°å™¨ä¸­çš„åŠŸèƒ½---")
            self.__func()
    
    
    #è¯´æ˜ï¼š
    #1. å½“ç”¨Testæ¥è£…ä½œè£…é¥°å™¨å¯¹testå‡½æ•°è¿›è¡Œè£…é¥°çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåˆ›å»ºTestçš„å®ä¾‹å¯¹è±¡
    #    å¹¶ä¸”ä¼šæŠŠtestè¿™ä¸ªå‡½æ•°åå½“åšå‚æ•°ä¼ é€’åˆ°__init__æ–¹æ³•ä¸­
    #    å³åœ¨__init__æ–¹æ³•ä¸­çš„funcå˜é‡æŒ‡å‘äº†testå‡½æ•°ä½“
    #
    #2. testå‡½æ•°ç›¸å½“äºæŒ‡å‘äº†ç”¨Teståˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡
    #
    #3. å½“åœ¨ä½¿ç”¨test()è¿›è¡Œè°ƒç”¨æ—¶ï¼Œå°±ç›¸å½“äºè®©è¿™ä¸ªå¯¹è±¡()ï¼Œå› æ­¤ä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„__call__æ–¹æ³•
    #
    #4. ä¸ºäº†èƒ½å¤Ÿåœ¨__call__æ–¹æ³•ä¸­è°ƒç”¨åŸæ¥testæŒ‡å‘çš„å‡½æ•°ä½“ï¼Œæ‰€ä»¥åœ¨__init__æ–¹æ³•ä¸­å°±éœ€è¦ä¸€ä¸ªå®ä¾‹å±æ€§æ¥ä¿å­˜è¿™ä¸ªå‡½æ•°ä½“çš„å¼•ç”¨
    #    æ‰€ä»¥æ‰æœ‰äº†self.__func = funcè¿™å¥ä»£ç ï¼Œä»è€Œåœ¨è°ƒç”¨__call__æ–¹æ³•ä¸­èƒ½å¤Ÿè°ƒç”¨åˆ°testä¹‹å‰çš„å‡½æ•°ä½“
    @Test
    def test():
        print("----test---")
    test()
    showpy()#å¦‚æœæŠŠè¿™å¥è¯æ³¨é‡Šï¼Œé‡æ–°è¿è¡Œç¨‹åºï¼Œä¾ç„¶ä¼šçœ‹åˆ°"--åˆå§‹åŒ–--"
    

è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

    
    
    ---åˆå§‹åŒ–---
    func name is test
    ---è£…é¥°å™¨ä¸­çš„åŠŸèƒ½---
    ----test---


