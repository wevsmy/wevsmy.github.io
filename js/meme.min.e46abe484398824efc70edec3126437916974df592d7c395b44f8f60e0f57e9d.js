const throttle=(e,t)=>{let n,o,d;return function(){const r=this,a=arguments;n?(clearTimeout(o),o=setTimeout((function(){Date.now()-d>=t&&(e.apply(r,a),d=Date.now())}),Math.max(t-(Date.now()-d),0))):(e.apply(r,a),d=Date.now(),n=!0)}},delayTime=420;window.addEventListener("DOMContentLoaded",(e=>{const t=document.querySelector(".header");if(t){const e=window.getComputedStyle(t,null).getPropertyValue("height");document.documentElement.style.setProperty("--header-height",e)}}),{once:!0}),window.addEventListener("DOMContentLoaded",(e=>{const t=document.querySelector(".nav-toggle"),n=document.createElement("div");n.className="nav-toggle-inner",t.appendChild(n);for(let e=0;e<3;e++){const e=document.createElement("span");n.appendChild(e)}const o=document.getElementById("nav-toggle"),d=document.querySelector(".header"),r=document.querySelector(".nav-curtain");o.addEventListener("change",(e=>{e.target.checked?(d.classList.add("open"),t.classList.add("open"),d.classList.remove("fade"),r.style="display: block"):(d.classList.remove("open"),t.classList.remove("open"),d.classList.add("fade"))})),r.addEventListener("animationend",(e=>{o.checked||e.target.removeAttribute("style")})),window.addEventListener("scroll",throttle((function(){!function(){const e=document.getElementById("search-input");if(e&&e===document.activeElement)return;i()}()}),420));const a=window.getComputedStyle(document.documentElement,null).getPropertyValue("--max-width");function i(e){o.checked&&(o.checked=!1,d.classList.remove("open"),t.classList.remove("open"),e?r.removeAttribute("style"):d.classList.add("fade"))}window.matchMedia(`(max-width: ${a})`).addListener((e=>{e.matches||i(!0)}))}),{once:!0}),window.addEventListener("DOMContentLoaded",(e=>{const t=document.getElementById("back-to-top");null!==t&&window.addEventListener("scroll",throttle((function(){window.scrollY>100?t.classList.add("show"):t.classList.remove("show")}),420))}),{once:!0});const userPrefers=localStorage.getItem("theme");function getCurrentTheme(){return JSON.parse(window.getComputedStyle(document.documentElement,null).getPropertyValue("--theme-name"))}function changeModeMeta(e){document.documentElement.setAttribute("data-theme",e)}function changeMode(){const e="dark"===getCurrentTheme(),t=e?"#16171d":"#fff";if(document.querySelector('meta[name="theme-color"]').setAttribute("content",t),"undefined"!=typeof mermaidConfig){document.querySelectorAll(".mermaid").forEach((e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)})),e?(mermaidConfig.theme="dark",mermaid.initialize(mermaidConfig),mermaid.init()):(mermaidConfig.theme="default",mermaid.initialize(mermaidConfig),mermaid.init())}}function storePrefers(){window.localStorage.setItem("theme",getCurrentTheme())}"dark"===userPrefers?changeModeMeta("dark"):"light"===userPrefers&&changeModeMeta("light"),window.matchMedia("(prefers-color-scheme: dark)").addListener((e=>{changeMode()})),window.addEventListener("DOMContentLoaded",(e=>{changeMode();const t=document.getElementById("theme-switcher");t&&t.addEventListener("click",(e=>{e.preventDefault(),changeModeMeta("dark"==getCurrentTheme()?"light":"dark"),changeMode(),storePrefers()}))}),{once:!0}),window.addEventListener("storage",(function(e){"theme"===e.key&&(changeModeMeta("dark"===e.newValue?"dark":"light"),changeMode())})),window.addEventListener("DOMContentLoaded",(e=>{function t(e){document.querySelectorAll("table.lntable, .highlight > pre, .post-body > div > pre").forEach((t=>{t.parentNode.style.position="relative";const n=document.createElement("button");let o;n.className="copy-button",n.type="button",n.innerText="复制",o=t.classList.contains("lntable")?t.querySelectorAll(".lntd")[1]:t.querySelector("code"),n.addEventListener("click",(()=>{e.writeText(o.innerText).then((()=>{n.blur(),n.innerText="已复制",setTimeout((()=>{n.innerText="复制"}),1e3)})).catch((e=>{n.innerText="Error",console.error(e)}))})),t.appendChild(n),t.parentNode.addEventListener("mouseover",(()=>{n.style="visibility: visible; opacity: 1"})),t.parentNode.addEventListener("mouseout",(()=>{n.style="visibility: hidden; opacity: 0"}))}))}if(document.querySelectorAll(".post-body > pre").forEach((e=>{const t=document.createElement("div");e.parentNode.replaceChild(t,e),t.appendChild(e)})),navigator&&navigator.clipboard)t(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js",e.defer=!0,e.onload=function(){t(clipboard)},document.head.appendChild(e)}}),{once:!0});